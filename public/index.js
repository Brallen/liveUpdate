// Generated by CoffeeScript 2.1.0
(function() {
  var openComment, styles1, time, writeStyleChar, writeStyles;

  styles1 = "body{\n   background-color: gray;\n}                        \n.hidden{\n  display: block;\n}\np{\n   color: blue;\n}";

  openComment = false;

  writeStyleChar = function(which) {
    var styles;
    // begin wrapping open comments
    if (which === '/' && openComment === false) {
      openComment = true;
      styles = $('#style-text').html() + which;
    } else if (which === '/' && openComment === true) {
      openComment = false;
      styles = $('#style-text').html().replace(/(\/[^\/]*\*)$/, '<em class="comment">$1/</em>');
    // wrap style declaration
    } else if (which === ':') {
      styles = $('#style-text').html().replace(/([a-zA-Z- ^\n]*)$/, '<em class="key">$1</em>:');
    // wrap style value 
    } else if (which === ';') {
      styles = $('#style-text').html().replace(/([^:]*)$/, '<em class="value">$1</em>;');
    // wrap selector
    } else if (which === '{') {
      styles = $('#style-text').html().replace(/(.*)$/, '<em class="selector">$1</em>{');
    } else {
      styles = $('#style-text').html() + which;
    }
    $('#style-text').html(styles);
    return $('#style-tag').append(which);
  };

  writeStyles = function(message, index, interval) {
    var pre;
    if (index < message.length) {
      pre = document.getElementById('style-text');
      pre.scrollTop = pre.scrollHeight;
      writeStyleChar(message[index++]);
      return setTimeout((function() {
        return writeStyles(message, index, interval);
      }), interval);
    }
  };

  /*
   * appending the tags I'll need.
  $('body').append """
    <style id="style-tag"></style>
  	<span id="echo"></span>
  	<span id="heart"><i></i></span>
  	<pre id="style-text"></pre>
  """ */
  $('body').append("  <style id=\"style-tag\"></style>\n<pre id=\"style-text\"></pre>");

  time = window.innerWidth <= 578 ? 4 : 16;

  // starting it off
  writeStyles(styles1, 0, time);

}).call(this);
